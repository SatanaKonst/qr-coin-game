(function(){"use strict";var n={7474:function(n,t,e){var o=e(5130),r=e(6768);const i={class:"container pt-3"},a={class:"section"};function c(n,t,e,o,c,s){const l=(0,r.g2)("scanner"),u=(0,r.g2)("tool-bar"),d=(0,r.g2)("controls-panel");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",a,[(0,r.bF)(l,{onResult:t[0]||(t[0]=n=>c.scanResult=n)})]),(0,r.bF)(u,{inventar:c.inventar},null,8,["inventar"]),null!==n.currentQuestion?((0,r.uX)(),(0,r.Wv)(d,{key:0,question:n.currentQuestion,inventar:c.inventar,onClose:t[1]||(t[1]=t=>n.currentQuestion=null)},null,8,["question","inventar"])):(0,r.Q3)("",!0)])}const s={ref:"videoArea",class:"w-100"};function l(n,t,e,o,i,a){return(0,r.uX)(),(0,r.CE)("video",s,null,512)}var u=e(3746),d={name:"qrCodeScanner",props:{},data(){return{scanner:null}},mounted(){this.scanner=new u.A(this.$refs.videoArea,(n=>{this.$emit("result",n)}),{highlightScanRegion:!0}),this.scanner.start()}},v=e(1241);const f=(0,v.A)(d,[["render",l],["__scopeId","data-v-4f5f86ec"]]);var m=f;const p={class:"controls-panel"},b={class:"container pt-2 text-center"};function h(n,t,e,o,i,a){const c=(0,r.g2)("move-coin-qr-code-modal");return(0,r.uX)(),(0,r.CE)("div",p,[(0,r.Lk)("div",b,[(0,r.bF)(c,{inventar:e.inventar},null,8,["inventar"])])])}const g={key:0,class:"btn btn-lg btn-success","data-bs-toggle":"modal","data-bs-target":"#moveCoinModal"},k={class:"modal fade",id:"moveCoinModal",tabindex:"-1","aria-labelledby":"moveCoinModalLabel","aria-hidden":"true"},y={class:"modal-dialog"},C={class:"modal-content"},A=(0,r.Lk)("div",{class:"modal-header"},[(0,r.Lk)("h5",{class:"modal-title",id:"moveCoinModalLabel"},"Передать монеты"),(0,r.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),w={class:"modal-body"},O={key:1},E=(0,r.Lk)("div",{class:"modal-footer"},[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1);function L(n,t,e,o,i,a){const c=(0,r.g2)("qrcode-vue");return(0,r.uX)(),(0,r.CE)(r.FK,null,[e.inventar.coin?((0,r.uX)(),(0,r.CE)("button",g," Передать монеты ")):(0,r.Q3)("",!0),(0,r.Lk)("div",k,[(0,r.Lk)("div",y,[(0,r.Lk)("div",C,[A,(0,r.Lk)("div",w,[e.inventar.coin?((0,r.uX)(),(0,r.Wv)(c,{key:0,value:"addCoin="+e.inventar.coin.count,size:"300"},null,8,["value"])):((0,r.uX)(),(0,r.CE)("p",O,"Нет монет для передачи"))]),E])])])],64)}var S=e(9877),j={name:"moveCoinQrCodeModal",props:{inventar:Object},components:{QrcodeVue:S.A},mounted(){let n=document.getElementById("moveCoinModal");n.addEventListener("hidden.bs.modal",(()=>{delete this.$props.inventar.coin}))}};const _=(0,v.A)(j,[["render",L]]);var q=_,T={name:"controlsPanel",props:{inventar:Object},components:{moveCoinQrCodeModal:q},data(){return{}},methods:{}};const X=(0,v.A)(T,[["render",h],["__scopeId","data-v-74d73907"]]);var M=X,P=e(4232);const x={class:"section",id:"toolBar"},Q={class:"row"},F=["onClick"],I=["src"];function N(n,t,e,o,i,a){return(0,r.uX)(),(0,r.CE)("div",x,[(0,r.Lk)("div",Q,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.inventar,((n,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"col-12 text-center",key:t,onClick:t=>a.initAction(n)},[(0,r.Lk)("img",{src:n.icon,alt:"",height:"100",width:"100"},null,8,I),(0,r.Lk)("p",null,(0,P.v_)(n.count),1)],8,F)))),128))])])}var R={name:"toolBar",props:{inventar:Array},methods:{initAction(n){"iconClick"===n.actionEventStart&&null!==n.action&&n.action()}}};const B=(0,v.A)(R,[["render",N],["__scopeId","data-v-16e70a68"]]);var J=B,$={name:"App",components:{ToolBar:J,ControlsPanel:M,scanner:m},data(){return{scanResult:null,inventarSrc:{coin:{icon:this.$attrs.publicPath+"assets/icons/coin.png",count:0,lastAddTime:0}},inventar:{}}},mounted(){let n=localStorage.getItem("qr-coin-game-invetar");if(n)try{this.inventar=JSON.parse(n)}catch(t){console.info("Пустой сохраненный инвентарь"),this.inventar={}}},watch:{inventar:{deep:!0,handler(){localStorage.setItem("qr-coin-game-invetar",JSON.stringify(this.inventar))}},scanResult(){if("object"===typeof this.scanResult){let n=this.scanResult.data.split("=");switch(n[0]){case"addCoin":if(this.inventar.coin||(this.inventar.coin=JSON.parse(JSON.stringify(this.inventarSrc.coin))),0!==this.inventar.coin.lastAddTime&&Date.now()-this.inventar.coin.lastAddTime<5e3)break;this.inventar.coin.count+=+n[1],this.inventar.coin.lastAddTime=Date.now();break}}}},methods:{}};const D=(0,v.A)($,[["render",c]]);var K=D;e(8077);const W="/qr-coin-game/";(0,o.Ef)(K,{publicPath:W}).mount("#app")}},t={};function e(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return n[o].call(i.exports,i,i.exports,e),i.exports}e.m=n,function(){var n=[];e.O=function(t,o,r,i){if(!o){var a=1/0;for(u=0;u<n.length;u++){o=n[u][0],r=n[u][1],i=n[u][2];for(var c=!0,s=0;s<o.length;s++)(!1&i||a>=i)&&Object.keys(e.O).every((function(n){return e.O[n](o[s])}))?o.splice(s--,1):(c=!1,i<a&&(a=i));if(c){n.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=n.length;u>0&&n[u-1][2]>i;u--)n[u]=n[u-1];n[u]=[o,r,i]}}(),function(){e.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return e.d(t,{a:t}),t}}(),function(){e.d=function(n,t){for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})}}(),function(){e.f={},e.e=function(n){return Promise.all(Object.keys(e.f).reduce((function(t,o){return e.f[o](n,t),t}),[]))}}(),function(){e.u=function(n){return"js/"+n+".1b68babf.js"}}(),function(){e.miniCssF=function(n){}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)}}(),function(){var n={},t="qr-coin-game:";e.l=function(o,r,i,a){if(n[o])n[o].push(r);else{var c,s;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+i){c=d;break}}c||(s=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,e.nc&&c.setAttribute("nonce",e.nc),c.setAttribute("data-webpack",t+i),c.src=o),n[o]=[r];var v=function(t,e){c.onerror=c.onload=null,clearTimeout(f);var r=n[o];if(delete n[o],c.parentNode&&c.parentNode.removeChild(c),r&&r.forEach((function(n){return n(e)})),t)return t(e)},f=setTimeout(v.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=v.bind(null,c.onerror),c.onload=v.bind(null,c.onload),s&&document.head.appendChild(c)}}}(),function(){e.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}}(),function(){e.p="/qr-coin-game/"}(),function(){var n={524:0};e.f.j=function(t,o){var r=e.o(n,t)?n[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise((function(e,o){r=n[t]=[e,o]}));o.push(r[2]=i);var a=e.p+e.u(t),c=new Error,s=function(o){if(e.o(n,t)&&(r=n[t],0!==r&&(n[t]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,r[1](c)}};e.l(a,s,"chunk-"+t,t)}},e.O.j=function(t){return 0===n[t]};var t=function(t,o){var r,i,a=o[0],c=o[1],s=o[2],l=0;if(a.some((function(t){return 0!==n[t]}))){for(r in c)e.o(c,r)&&(e.m[r]=c[r]);if(s)var u=s(e)}for(t&&t(o);l<a.length;l++)i=a[l],e.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return e.O(u)},o=self["webpackChunkqr_coin_game"]=self["webpackChunkqr_coin_game"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=e.O(void 0,[504],(function(){return e(7474)}));o=e.O(o)})();
//# sourceMappingURL=app.c8155a21.js.map